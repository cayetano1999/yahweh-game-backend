parameters:
- name: projectType
  type: string
  default: 'dotnet'
- name: changelog
  type: string
  default: './CHANGELOG.md'
  
steps:
- checkout: self
  persistCredentials: true
- task: PowerShell@2
  displayName: 'Update version'
  name: versionTask
  inputs:
    filePath: 'tools/update-version/Update-Version.ps1'
    failOnStderr: false
    pwsh: true
    arguments:
      -Changelog '${{ parameters.changelog }}'
      -URL $(Build.Repository.Uri)
      -AuthorName '$(Build.RequestedFor)'
      -AuthorEmail '$(Build.RequestedForEmail)'
      -Branch '$(Build.SourceBranchName)'
      -PathVersion .
      -Stage "dev"
      -Type ${{ parameters.projectType }}